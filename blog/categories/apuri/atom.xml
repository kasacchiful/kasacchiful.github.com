<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: アプリ | Kasacchiful's Blog]]></title>
  <link href="http://kasacchiful.github.com/blog/categories/apuri/atom.xml" rel="self"/>
  <link href="http://kasacchiful.github.com/"/>
  <updated>2014-07-21T17:11:02+09:00</updated>
  <id>http://kasacchiful.github.com/</id>
  <author>
    <name><![CDATA[kasacchiful]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[2年前に作ったものを今更ながら公開しました]]></title>
    <link href="http://kasacchiful.github.com/blog/2014/07/21/bingo_sample/"/>
    <updated>2014-07-21T17:00:00+09:00</updated>
    <id>http://kasacchiful.github.com/blog/2014/07/21/bingo_sample</id>
    <content type="html"><![CDATA[<p>先日のNDS#36のLTでしゃべった内容について、
ようやくGitHubにアップしましたので、説明します。
かなり期間が空いてしまったのは、反省点。</p>

<!-- more -->


<h2>何を作ったのか？</h2>

<p>ビンゴゲームで、あたった番号を表示するアプリです。
また景品の画像も表示できるようにしてます。</p>

<p>サンプルは<a href="https://github.com/kasacchiful/bingo_sample">GitHub</a>に公開しています。</p>

<h2>なぜ作ったのか？</h2>

<p>NDS#36のLTでしゃべったのですが、時間がほとんどない状況だったので、
詳しくしゃべれませんでした。</p>

<p>結婚式の2次会用に作ったものです。
今まで、結婚式2次会幹事を4回やっておりますが、余興を考えていると、
あんまり凝った内容のものは、参加者はお酒が入って酔っ払っているため、さっぱり覚えきれなくてつまらくなってしまうんです。</p>

<p>3回目の2次会幹事の際に、「適当ビンゴ」なるものをやりました。（ググるといろいろ出てきます。）
これは、新郎新婦にゆかりのある数字や、司会者の判断（時間的な都合等）で、
一気に複数の数字があたるようなビンゴになっています。</p>

<p>ビンゴマシーンいらずで、ビンゴカードのみで実施できるのですが、
参加人数が100人規模だったので、
何番が該当するのか口頭だけだと伝わりにくいなぁということと
何番がまだコールされていないかが司会者が判断しにくいということで、
「会場のプロジェクタやモニタ使って、番号を表示してしまえばいいじゃん」
ということになりました。</p>

<p>さくっとできそうだったので、私が2時間程度で作ってしまいました。
（内1時間は画像作成）</p>

<h2>使い方</h2>

<p>ただのHTMLなので、ブラウザで開いて、お使いください。</p>

<h3>入手先</h3>

<p>まずは、<a href="https://github.com/kasacchiful/bingo_sample">GitHub</a>から、ダウンロードしてください。
ダウンロードの仕方がわからない方は、右側メニューの下側にある「Download ZIP」をクリックし、
ダウンロードしたzipファイルを解凍します。</p>

<p>ダウンロードリンクも <a href="https://github.com/kasacchiful/bingo_sample/archive/master.zip">ここ</a> に貼っておくので、
ここからダウンロードしてもかまいません。</p>

<h3>起動方法</h3>

<p>番号の横並び、もしくは、縦並びがあります。
index.html もしくは vertical.html をブラウザで開いてください。
ブラウザで開いたら、URL表示部分等を隠すために、全画面表示することをオススメします。</p>

<h3>初期状態へ戻す</h3>

<p>ブラウザの再表示（F5など）で、最初の表示に戻ります。</p>

<h3>終了方法</h3>

<p>ブラウザを閉じるだけです。</p>

<h2>画像の差替</h2>

<p>景品画像等を表示するために、
画面左側にマウスカーソルを合わせると
リンクがにょきっと出てきます。</p>

<p>リンクをクリックすると、画像がモーダル風に表示されます。</p>

<p>黒背景部分をクリックすると、画像が非表示になり、元に戻ります。</p>

<p>GitHubにあるのは、サンプル画像なので、
適宜差し替えてご使用ください。</p>

<h3>画像の保存場所</h3>

<p>imagesディレクトリ内に保存してください。</p>

<h3>画像の呼び出し変更</h3>

<p>index.htmlもしくはvertical.htmlの以下の部分を
テキストエディタで編集します。</p>

<p>```html</p>

<pre><code>  &lt;ul id='navigation'&gt;
    &lt;li class='A'&gt;&lt;a title='A賞' class='openmodalbox' href='images/A.jpg'&gt;A賞&lt;/a&gt;&lt;/li&gt;
    &lt;li class='B'&gt;&lt;a title='B賞' class='openmodalbox' href='images/B.jpg'&gt;B賞&lt;/a&gt;&lt;/li&gt;
    &lt;li class='C'&gt;&lt;a title='C賞' class='openmodalbox' href='images/C.jpg'&gt;C賞&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
</code></pre>

<p>```</p>

<p><code>href='images/A.jpg'</code>部分に画像ファイル名を、<code>A賞</code>部分に画面に表示されるリンク名（景品名等）を各々変更してください。
景品の数が多い場合は、<code>&lt;li</code>から始まる1行をコピペして景品数分並べてください。</p>

<h2>今後の予定？</h2>

<p>せっかく公開したので、何か作りたい。
自分の勉強のために、Webサービス化してもいいかも。</p>

<p>後は、タブレット対応して、番号を押しやすくしてみたい。</p>

<h2>注意</h2>

<p>本アプリケーションによって生じるいかなる損失等は、当方は一切の責任を持ちません。
特に、画像の呼び出し変更部分の際に、誤ってアプリケーションが動かなくなる等の事が発生することが想定されますが、
当方は一切のサポートはできません。
HTMLに詳しい身内の方に修正をお願いしてください。</p>

<p>また、動作環境はMac版のGoogle Chromeで行っています。
Google ChromeおよびMozilla Firefoxで動作しますが、
Microsoft Internet Explorerでは動作しません。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ChromeでURLルートディレクトリにfavicon.icoが無いとセッション切れする]]></title>
    <link href="http://kasacchiful.github.com/blog/2014/06/18/chrome_favicon/"/>
    <updated>2014-06-18T22:55:00+09:00</updated>
    <id>http://kasacchiful.github.com/blog/2014/06/18/chrome_favicon</id>
    <content type="html"><![CDATA[<p>タイトルの件が発生したので、メモ。</p>

<h2>Chromeでセッション切れ発生</h2>

<p>とあるWebシステムで、Chromeでアクセスした際に、ログイン後の画面から別の画面へのリンクをクリックすると、ログイン画面に戻される。
再ログインした後の画面から別の画面へのリンクをクリックすると、またログイン画面に戻される。</p>

<p>開発環境では発生せず、ステージング環境で発生してしまう。</p>

<!-- more -->


<h2>とりあえず、Cookieを見る</h2>

<p>ChromeのデベロッパーツールでCookieの値を確認してみる。
ログイン後の画面でのセッションキーの値と、リンクをクリックした際に戻されたログイン画面でのセッションキーの値に相違があることが判明。
セッションキーの値が変わっているので、ログインセッションが切れたようです。</p>

<p>原因がさっぱりわからなかったので、google先生に聞いてみました。</p>

<h2>favicon.ico が原因？</h2>

<p>google先生に聞いてみると、
どうやらfavicon.icoが無いとセッション切れするらしい。</p>

<p>chromeでは、linkタグにfavicon.icoの指定がなければ、
URLルート直下にfavicon.icoにあるものと判断し、そこから取得しようとするようです。</p>

<p>favicon.icoファイル自体は存在していて、
開発環境ではURLルート直下にあるので、開発環境ではChromeでログインセッションが保たれているようです。
ステージング環境ではサブディレクトリ配下でアプリケーションが動いているため、
URLルート直下ではなく、サブディレクトリにfavicon.icoがあるからステージング環境で発生してしまう。</p>

<p>例えば、linkタグでfavicon.icoを指定してあげるようにすると、解決する。</p>

<p><code>
&lt;link rel="shortcut icon" href="http://kasacchiful.github.com/hoge/foo/bar/favicon.ico" /&gt;
</code></p>

<p>開発環境とステージング環境では、favicon.icoのURLが異なるため、
そこはうまいこと指定できるようにしてあげました。</p>

<p>本アプリはRailsだったので、<code>favicon_image_tag</code>ヘルパーを使って対応しました。
Rails3以降で使えるヘルパーなので、
Rails2以前では、<code>ActionController::Base.relative_url_root</code>や<code>request.relative_url_root</code>等をうまく使って対応できそう。</p>

<p>それにしても、favicon.ico取得で404エラーすると、セッション切れちゃうのは、
何だか気持ち悪いですけどね。</p>
]]></content>
  </entry>
  
</feed>
